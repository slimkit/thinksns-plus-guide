# ThinkSNS+ HTML 5 (SPA)ğŸ˜Š
æ–‡æ¡£æŒç»­è¡¥å……ä¸­...

è¿™æ˜¯ ThinkSNS Plus çš„ä¸€ä¸ª SPA å‰ç«¯åº”ç”¨ï¼

> å½“å‰åˆ†æ”¯ä¸º `4.0.0-rc.*` ç‰ˆæœ¬å¼€å‘åˆ†æ”¯ï¼Œå®‰è£…**ç¨³å®šç‰ˆæœ¬**è¯·å‰å¾€ğŸ‘‰[3.x Branch](https://github.com/zhiyicx/plus-component-h5/tree/3.x)

## æ¦‚è¿°

> æ˜¯çš„ï¼4.0 æ˜¯ä¸€ä¸ªå…¨æ–°çš„ç‰ˆæœ¬ï¼Œå¹¶ä¸”æ˜¯å’Œä»¥å¾€ç‰ˆæœ¬å®Œå…¨ä¸åŒçš„ç‰ˆæœ¬ã€‚

å®‰è£… `4.0` ç‰ˆæœ¬ä½ å”¯ä¸€çš„å‰ç½®æ¡ä»¶æ˜¯å·²ç»å®‰è£…äº† Plus ç¨‹åºï¼ç„¶åï¼Œ4.0 ç‰ˆæœ¬æ˜¯å®Œå…¨é™æ€ï¼Œå¯åˆ†å‘ï¼Œç‹¬ç«‹éƒ¨ç½²çš„æ‰‹æœºæµè§ˆå™¨å®¢æˆ·ç«¯ã€‚
å› ä¸º 4.0 ç‰ˆæœ¬å·²ç»ä¸å†ä¾èµ–æœåŠ¡å™¨ï¼Œè€Œæ˜¯é€šè¿‡ API çš„æ–¹å¼è¿›è¡Œäº¤äº’ã€‚

## ä¸‹è½½

é¦–å…ˆï¼Œä½ å¯ä»¥é€šè¿‡å¤šç§é€”å¾„ä¸‹è½½ SPAï¼š

Composer:

```shell
composer create-project zhiyicx/plus-component-h5:4.0.0-rc.*
```

Git:

```shell
git clone https://github.com/zhiyicx/plus-component-h5
```

## å®‰è£…

é€šè¿‡ä¸Šè¿°ä»»ä¸€æ–¹å¼ä¸‹è½½å®Œæˆåï¼Œæˆ‘ä»¬è¿›å…¥ SPA çš„ç›®å½•ï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ª `.env.example` çš„æ–‡ä»¶ï¼Œä½ éœ€è¦å¤åˆ¶ä¸€ä»½ï¼Œå¹¶å‘½åä¸º `.env`ï¼š

| å¥ | æè¿° |
|-----|-----|
| BASE_URL | é¡¹ç›®éƒ¨ç½²çš„åŸºç¡€è·¯å¾„ï¼Œæˆ‘ä»¬é»˜è®¤å‡è®¾ä½ çš„åº”ç”¨å°†ä¼šéƒ¨ç½²åœ¨åŸŸåçš„æ ¹éƒ¨ï¼Œæ¯”å¦‚ `https://www.my-app.com/` å¦‚æœä½ çš„åº”ç”¨æ—¶éƒ¨ç½²åœ¨ä¸€ä¸ªå­è·¯å¾„ä¸‹ï¼Œé‚£ä¹ˆä½ éœ€è¦åœ¨è¿™é‡ŒæŒ‡å®šå­è·¯å¾„ã€‚æ¯”å¦‚ï¼Œå¦‚æœä½ çš„åº”ç”¨éƒ¨ç½²åœ¨ `https://www.foobar.com/my-app/` é‚£ä¹ˆå°†è¿™ä¸ªå€¼æ”¹ä¸º `/my-app/` |
| GENERATE_CSS_MAP | ç¼–è¯‘é™æ€èµ„æºçš„æ—¶å€™æ˜¯å¦ç”Ÿæˆ `sourceMap` |
| VUE_APP_API_HOST | ä½ çš„ Plus ç¨‹åºç½‘å€ |
| VUE_APP_API_VERSION | ä½ è¦ä½¿ç”¨çš„ Plus ç¨‹åº API ç‰ˆæœ¬å·ï¼Œç›®å‰å›ºå®šä¸º `v2` |
| VUE_APP_NAME | ä½ çš„ç¨‹åºåå­— |
| VUE_APP_KEYWORDS | ä½ çš„ç¨‹åºå…³é”®è¯ï¼Œä½¿ç”¨è‹±æ–‡åŠè§’ `,` ç¬¦å·åˆ†å‰²å¤š |
| VUE_APP_DESCRIPTION | ä½ çš„ç¨‹åºæè¿° |
| VUE_APP_ROUTER_MODE | å‰ç«¯è·¯ç”±ä½¿ç”¨çš„è·¯ç”±æ¨¡å¼ï¼Œæ”¯æŒ `hash` å’Œ `history` ä¸¤ç§æ¨¡å¼ï¼Œå…·ä½“è¯·å‚è€ƒğŸ‘‰ [`vue-route mode`](https://router.vuejs.org/zh-cn/api/options.html#mode) |

> ä»¥ä¸Šä¿¡æ¯é…ç½®å®Œæˆåï¼Œä½ è¿è¡Œ **`yarn`** æˆ–è€… **`npm install`** è¿›è¡Œä¾èµ–å®‰è£…ï¼

## æœ¬åœ°è¿è¡Œ

å¥½äº†ï¼Œä½ å·²ç»å®‰è£…å®Œæˆäº†ï¼Œé¦–å…ˆæˆ‘ä»¬æœ¬åœ°é¢„è§ˆä¸€ä¸‹å§ï¼Œåœ¨ SPA ç›®å½•æ‰§è¡Œ `yarn serve` æˆ–è€… `npm run serve` ä½ çš„æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€é¢„è§ˆåœ°å€ï¼
ä½ ç°åœ¨å¯ä»¥çœ‹åˆ°ç¨‹åºçš„æ ·å­äº†ã€‚

## æ­£å¼éƒ¨ç½²

ç°åœ¨ï¼Œæˆ‘ä»¬å¼€å§‹éƒ¨ç½²å§ï¼Œä½ åªéœ€è¦è¿è¡Œ `yarn build` æˆ–è€… `npm run build` ç„¶åç­‰å¾…å‘½ä»¤æ‰§è¡Œå®Œæˆåï¼Œä½ ä¼šçœ‹åˆ°å¤šå‡ºä¸€ä¸ª `/dist` ç›®å½•ã€‚

ç°åœ¨æˆ‘ä»¬å§ `/dist` ç›®å½•çš„å†…å®¹æ”¾ç½®åœ¨çš„çš„ http æœåŠ¡å™¨ä¸Šï¼Œè€Œä¸”å¹¶ä¸éœ€è¦ä»»ä½•çš„åŠ¨æ€è¯­è¨€æ”¯æŒã€‚å°±æ˜¯çº¯é™æ€ï¼Œæ‰€ä»¥ä½ ä¹Ÿå¯ä»¥æ”¾ç½®åœ¨ CDN ä¸Šè¿›è¡Œåˆ†å‘ã€‚

### ä½¿ç”¨ `history` æ¨¡å¼

å¦‚æœä½ è¦ä½¿ç”¨ `history` æ¨¡å¼ï¼Œéœ€è¦ä½ çš„æœåŠ¡å™¨çš„è½¬å‘æ”¯æŒï¼Œæ‰€ä»¥è¯·å‚çœ‹ğŸ‘‰[HTML5 History æ¨¡å¼](https://router.vuejs.org/zh-cn/essentials/history-mode.html) æ–‡æ¡£ã€‚

### è·¨åŸŸé—®é¢˜

å½“ä½ éƒ¨ç½² SPA åï¼Œå¦‚æœæ”¾ç½®ç¨‹åºçš„åŸŸä¹Ÿå°±æ˜¯ `VUE_APP_API_HOST` é…ç½®çš„æ˜¯å…¶ä»–åŸŸåï¼Œä½ çš„ Plus éœ€è¦é…ç½®è·¨åŸŸé€‰é¡¹ã€‚ä½†æ˜¯åœ¨ Plus ç¨‹åºä¸­è®¾ç½®è·¨åŸŸåœ¨ä¸åŒç‰ˆæœ¬ä¸­æœ‰ä¸åŒåŒºåˆ«ï¼š

### 1.7 ç‰ˆæœ¬

ç°åœ¨ï¼Œä½ è¿›å…¥ Plus ç¨‹åºï¼Œæ‰“å¼€ `.plus.yml` æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```
http:
    cors:
        credentials: true
        origin:
            - http://my-app.com
```

> å› ä¸º origin æ˜¯å¯ä»¥é…ç½®å¤šä¸ªè¿è¡Œè·¨åŸŸçš„åŸŸåçš„ï¼Œä½ å°† `http://my-app.com` æ›¿æ¢ä¸º SPA çš„åœ°å€å³å¯ã€‚

å½“ç„¶ï¼Œä½ å¯ä»¥å°† `origin` ç›´æ¥è®¾ç½®ä¸º `*` æ¥è¿è¡Œæ‰€æœ‰çš„è·¨åŸŸè¯·æ±‚ã€‚

### 1.8 ä»¥åŠæ›´é«˜ç‰ˆæœ¬

åœ¨ `1.8` ä»¥åŠä»¥ä¸Šç‰ˆæœ¬ä¸­ï¼Œè®¾ç½®è·¨åŸŸå°†å˜å¾—å¾ˆç®€å•ï¼Œä½ åªéœ€è¦è¿›å…¥åå°ï¼Œæ‰“å¼€ `å®‰å…¨` ç„¶ååœ¨ `è·¨åŸŸè®¾ç½®` ä¸­æ·»åŠ ä½ éœ€è¦çš„è·¨åŸŸä¿¡æ¯å³å¯ã€‚

### æŠ€æœ¯è¯´æ˜
- å¼€å‘è¯­è¨€ï¼š`JavaScript`ã€`es6/7/8`
- å¼€å‘å·¥å…·ï¼š`Sublime Text 3`
- å¼€å‘ç¯å¢ƒï¼š`Windows` + `nodejs > 8`

æŠ€æœ¯è¦æ±‚ï¼š`JavaScript`ã€`es6/7/8`ã€`vue `ã€`vuex`ã€`vue-router`ã€`less`ã€`IndexedDB`


